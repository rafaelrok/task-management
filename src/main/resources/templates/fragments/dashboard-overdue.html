<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<tbody th:fragment="overdue-tasks" id="overdueTableBody">
    <tr class="table-row-animate"
        th:each="t, iterStat : ${overdueTasks}"
        th:if="${iterStat.index < 5}">
        <td><span class="task-id" th:text="${t.id()}">1</span></td>
        <td><span class="task-title" th:text="${t.title()}">Titulo</span></td>
        <td>
            <span class="badge-status"
                  th:classappend="${t.status().name().toLowerCase()}"
                  th:text="${t.status()}">TODO</span>
        </td>
        <td>
            <span class="badge-priority"
                  th:classappend="${t.priority().name().toLowerCase()}"
                  th:text="${t.priority()}">HIGH</span>
        </td>
        <td>
            <span class="task-date"
                  th:if="${t.scheduledStartAt() != null}"
                  th:text="${'Início: ' + #temporals.format(t.scheduledStartAt(),'dd/MM HH:mm')}">Início: 01/01 12:00</span>
            <span class="task-date"
                  th:if="${t.dueDate() != null and t.scheduledStartAt() == null}"
                  th:text="${'Venc: ' + #temporals.format(t.dueDate(),'dd/MM HH:mm')}">Venc: 01/01 12:00</span>
            <span class="task-date"
                  th:if="${t.dueDate() == null and t.scheduledStartAt() == null}">-</span>
        </td>
        <td>
            <button class="btn-action btn-view"
                    onclick="openTaskModal(this.dataset.taskId)"
                    th:attr="data-task-id=${t.id()}">
                <i class="bi bi-eye"></i>
            </button>
        </td>
    </tr>
    <tr th:if="${#lists.isEmpty(overdueTasks)}">
        <td class="empty-state" colspan="6">
            <i class="bi bi-check-circle"></i>
            <span>Nenhuma tarefa atrasada</span>
        </td>
    </tr>
</tbody>
</body>
</html>
